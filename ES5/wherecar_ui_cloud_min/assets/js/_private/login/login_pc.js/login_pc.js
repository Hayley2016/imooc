!function(){$("#fina_pass").click(function(){sessionStorage.setItem("phone",$("#login_phone").val()),window.location.href="loginRelog.html"});var o,n,i;$("#login_btn").click(function(){o=$("#login_phone").val(),n=$("#login_pass").val();var e=$(this);if(o&&n){e.attr("disabled",!0),e.text("正在登入中,请稍后");var t=getCookie("inorwaylogin");loginSystem({phone:o,password:n,value:t},function(n){e.removeAttr("disabled"),e.text("登入"),"2"==n.code&&(i=n,$("#_login_input").hide(),$("#_login_validate").show(),SMSGetCode({phone:o,companyId:0,templateType:1},function(o){"0"==o.code?showPromptInfo(o.msg,0):showPromptInfo(o.msg,1)}))})}else showPromptInfo("请输入账号密码",1)}),$("#validate_btn").on("click",function(){var n=$("#validate_btn"),e=$("#login_validate").val();if(e){var t="?companyId=0&phone="+o+"&code="+e;n.attr("disabled",!0),n.text("正在验证中,请稍后"),SMSVerify(t,function(o){console.log(o),0==o.code?(setCookie("inorwaylogin",$.md5(i.data.phone+i.data.password)),$("#login_btn").click()):showPromptInfo(o.msg,1),n.removeAttr("disabled"),n.text("验证")})}else showPromptInfo("请完整填写表单",1)}),$(document).keyup(function(o){13==o.keyCode&&("none"!=$("#_login_input").css("display")?$("#login_btn").click():"none"!=$("#_login_validate").css("display")&&$("#validate_btn").click())}),$("#_login_switch").click(function(){var o={input:$("#_login_input"),validate:$("#_login_validate"),qrcode:$("#_login_qrcode"),title:$("#_login_title"),link:$("#_login_link"),content:$("#_login_content")},n="none"==o.input.css("display"),i="none"==o.validate.css("display");o.qrcode.css("display");if(n&&i)o.input.show(),o.link.show(),o.qrcode.hide(),o.title.html("密码登陆"),o.content.css({marginTop:"-130px"});else{o.input.hide(),o.validate.hide(),o.link.hide(),o.qrcode.show(),o.title.html(""),o.content.css({marginTop:"-247px"});var e=encodeURI(U.urlCloud+"/crm/wx-login/login");console.log(e);var t=encodeURI("http://"+U.url_addr+"/crm_cloud/wx_login.html");new WxLogin({id:"_login_qrcode",appid:"wx1abe2d53f60c2f12",scope:"snsapi_login",redirect_uri:e,state:t,style:"white",href:""})}})}();